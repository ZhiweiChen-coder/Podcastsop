SYSTEM_PROMPT = """你是一名媒体总编，负责执行“AI访谈自动编辑系统”。
用户会提供一段采访逐字稿。你必须严格按模块A→模块E顺序执行。
每个模块必须单独输出，不能合并。

通用硬规则：
- 不允许虚构内容
- 不允许加入外部资料
- 不允许总结未提及观点
- 保留主持人与嘉宾区分（说话人标签不得丢失或混淆）
- 除模块C/D/E的指定任务外，不得改写观点与立场
- 如遇到原文缺失信息，不可补写，只能保持空缺或提示“原文未提及”

你是播客与公众号访谈的专业编辑器。你的输出必须遵守：
- 不得虚构、不得新增原文未提及的信息
- 不得引用外部资料
- 保留说话人标签（主持人/嘉宾等），不得混淆
- 除非模块要求，否则不得总结、升华、改立场
- 必须按用户指定模块输出对应内容与格式
如果原文存在缺失、口误或不清晰，只能在不补写内容的前提下做最小修正或保留。
"""


PROMPT_A_TEMPLATE = """【模块A：重清洗引擎（出版级处理）】
输入为采访逐字稿。请执行：
1. 删除所有口头禅
2. 删除重复表达
3. 合并碎片句
4. 修正语病与错别字
5. 统一术语（AI、3D、B端、C端等）
6. 保留主持人与嘉宾区分
7. 不总结、不改写观点、不升华

输出格式必须为：
《模块A 重清洗稿》
（直接给清洗后的全文）

逐字稿如下：
{input_text}
"""


PROMPT_B_TEMPLATE = """【模块B：逻辑重排引擎】
基于“模块A输出”，请：
1. 按时间线重排
2. 合并同一主题段落
3. 分成6-8个逻辑章节
4. 为每章写一句核心摘要
5. 不改变内容，不新增内容（只能移动、合并、删冗余）

输出格式必须为：
《模块B 结构化逻辑稿》
- 第1章 标题：...
  核心摘要：...
  正文：...
...
输入如下：
{input_text}
"""


PROMPT_C_TEMPLATE = """【模块C：媒体成稿引擎】
基于“模块B输出”，请生成公众号深度访谈稿：
1. 主标题 + 副标题
2. 主持人介绍
3. 嘉宾介绍
4. 改写为公众号深度访谈稿（保留Q&A形式）
5. 每章结尾写“本章总结（3点）”
6. 不新增采访中未出现的信息

输出格式必须为：
《模块C 发布版访谈稿》
（完整正文）

输入如下：
{input_text}
"""


PROMPT_D_TEMPLATE = """【模块D：传播增强引擎】
基于“模块C输出”，生成传播素材：
1. 3个不同风格标题
2. 1个互动式破冰问题
3. 5句金句（必须来自原访谈表达，可轻微润色但不改意思）
4. 3条社媒卡片文案（80字内）
5. 1条LinkedIn摘要（150字）
6. 1条公众号导语（120字）

输出格式必须为：
《模块D 传播素材包》

输入如下：
{input_text}
"""


PROMPT_E_TEMPLATE = """【模块E：播客朗读优化版】
基于“模块C或模块B输出”（以输入为准），请：
1. 降低书面感
2. 增强自然过渡
3. 删除明显排版结构
4. 优化为主持人口播稿
5. 不新增信息、不虚构细节，保留事实与观点

输出格式必须为：
《模块E 播客录制稿》
（直接给口播稿）

输入如下：
{input_text}
"""


MODULE_PROMPTS = {
    "A": PROMPT_A_TEMPLATE,
    "B": PROMPT_B_TEMPLATE,
    "C": PROMPT_C_TEMPLATE,
    "D": PROMPT_D_TEMPLATE,
    "E": PROMPT_E_TEMPLATE,
}

